---
processes:
  - name: route_populator
    executable: /var/vcap/packages/route_populator/bin/route_populator
    args:
      - -nats
      - <%= "https://" + link('nats').p("nats.user") + ":" + link('nats').p("nats.password") + "@" + link('nats').instances[0].address + ":" + link('nats').p("nats.port").to_s %>
      - -backendHost
      - "10.255.0.54"
      - -backendPort
      - 8080
      - -appDomain
      - <%= p("app_domain") %>
      - -appName
      - <%= p("app_name") %>
      - -numRoutes
      - <%= p("num_routes") %>
      <% if_p("route_populator.publish_delay") do |prop| %>
      - -publishDelay
      - <%= prop.to_s %>
      <% end %>
