---
name: silk-controller

templates:
  pre-start.erb: bin/pre-start
  silk-controller_ctl.erb: bin/silk-controller_ctl
  silk-controller_as_vcap.erb: bin/silk-controller_as_vcap
  silk-controller.json.erb: config/silk-controller.json
  ca.crt.erb: config/certs/ca.crt
  server.crt.erb: config/certs/server.crt
  server.key.erb: config/certs/server.key
  client-ca.crt.erb: config/certs/client-ca.crt
  client.crt.erb: config/certs/client.crt
  client.key.erb: config/certs/client.key
  dns_health_check.erb: bin/dns_health_check

packages:
  - silk-controller

properties:
  cf_networking.network:
    description: "CIDR block for overlay network."
    default: "10.255.0.0/16"

  cf_networking.subnet_prefix_length:
    description: "Length, in bits, of the prefix for subnets allocated per Diego cell, e.g. '24' for a '/24' subnet."
    default: 24

  cf_networking.subnet_lease_expiration_hours:
    description: "Expiration time for subnet leases, in hours"
    default: 168

  cf_networking.silk_controller.debug_port:
    description: "Port for the debug server"
    default: 22222

  cf_networking.silk_controller.listen_ip:
    description: "Host where the silk controller will serve its API"
    default: 0.0.0.0

  cf_networking.silk_controller.listen_port:
    description: "Port where the silk controller will serve its API"
    default: 4103

  cf_networking.silk_controller.ca_cert:
    description: "Trusted CA certificate for clients"

  cf_networking.silk_controller.server_cert:
    description: "Server certificate for TLS"

  cf_networking.silk_controller.server_key:
    description: "Server key for TLS"

  cf_networking.silk_daemon.ca_cert:
    description: "Trusted CA certificate for connecting to the silk controller.  Used by the local health-check."

  cf_networking.silk_daemon.client_cert:
    description: "Client certificate for TLS to access silk controller.  Used by the local health-check."

  cf_networking.silk_daemon.client_key:
    description: "Client private key for TLS to access silk controller.  Used by the local health-check."

  cf_networking.silk_controller.database.type:
    description: "Type of database: postgres or mysql"
    default: postgres

  cf_networking.silk_controller.database.username:
    description: "Username for database connection"
    default: ""

  cf_networking.silk_controller.database.password:
    description: "Password for database connection"
    default: ""

  cf_networking.silk_controller.database.host:
    description: "Host (IP or DNS name) for database server"
    default: ""

  cf_networking.silk_controller.database.port:
    description: "Port for database server"
    default: ""

  cf_networking.silk_controller.database.name:
    description: "Name of logical database to use"
    default: ""

  cf_networking.disable:
    description: "Disable container to container networking"
    default: false
